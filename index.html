<!DOCTYPE html>
<html lang="en">
	<head>
		<title>three.js webgl - geometry - cube</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<style>
			body {
				margin: 0px;
				background-color: #000000;
				overflow: hidden;
			}
		</style>
	</head>
	<div style="z-index: 5">HELLO</div>
	<body>

		<script src="three.js"></script>
		<script src="dat.gui.min.js"></script>
		<script src="mySpring.js"></script>

		<script>
			var gui = new dat.GUI({
			    height : 5 * 32 - 1
			});

			var camera, scene, renderer;
			var mesh;
			var ilanaLoader = new THREE.JSONLoader(true);
			var loader = new THREE.TextureLoader();
			var light, pointLight;
			var boy;
			init();
			animate();

			function init() {


				camera = new THREE.PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 1, 5000 );
				camera.position.z = 100;
				camera.position.x = -100
				camera.position.y = 30

				scene = new THREE.Scene();
				light = new THREE.AmbientLight(0x404040)
				scene.add(light)


            var tex = loader.load("boyTexture/tex-diffuse.png");
            var texNormal = loader.load("boyTexture/tex-normal.png")
            var aoMap = loader.load("boyTexture/tex-ao.png")
            var bumpMap = loader.load("boyTexture/tex-roughness.png")

            // var ilanaMat = new THREE.MeshPhongMaterial({
            //     map: ilanaMap,
            //     morphTargets: true,
            //     emissive: 0.0,
            //     alphaTest: 0.5,
            //     reflectivity: 0,
            //     shininess: 0,
            // });

             var boyMat = new THREE.MeshPhongMaterial({
                morphTargets: true,
                emissive: 0.0,
                alphaTest: 0.5,
                reflectivity: 0,
                shininess: 0,
                map: tex,
                normalMap: texNormal,
                aoMap: aoMap,
                bumpMap: bumpMap
            });

            ilanaLoader.load('combinedIntoBlendShapes5.json', function(geometry) {
            	boy = new THREE.Mesh(geometry, boyMat);
               boy.scale.x = 500;
                boy.scale.y = 500;
                boy.scale.z = 500;
                boy.position.x = -100;
                boy.position.y = 300;
                boy.position.z = -30;
            	boy.updateMatrix();
            	boy.matrixAutoUpdate = false;
            	scene.add(boy)
            	animateEmotions(boy);
            })


 				pointLight = new THREE.PointLight( 0xff0000, 1, 3000 );
				pointLight.position.set( 50, 50, 50 );
				scene.add( pointLight );

            // ilanaLoader.load("4mattFace6.js", function(geometry) { //  FACE_ONLY4 MASK_MORPHS.js models/1fmF.js  FACE_ONLYyyyyyy
            //     ilanaMesh = new THREE.Mesh(geometry, ilanaMat);
            //     ilanaMesh.scale.x = 10;
            //     ilanaMesh.scale.y = 10;
            //     ilanaMesh.scale.z = 10;

            //     // POSITIONS HERE DETERMINE LOCATION OF ROTATION CENTER WITHIN MESH
            //     ilanaMesh.position.x = 0;
            //     ilanaMesh.position.y = 0;
            //     ilanaMesh.position.z = -8;
            //     ilanaMesh.updateMatrix();
            //     ilanaMesh.matrixAutoUpdate = false;
            //     scene.add(ilanaMesh)
            //     // ilanaGroup.add(ilanaMesh);

            // });

				// var texture = new THREE.TextureLoader().load( 'textures/crate.gif' );

				// var geometry = new THREE.BoxBufferGeometry( 200, 200, 200 );
				// var material = new THREE.MeshBasicMaterial( { map: texture } );

				// mesh = new THREE.Mesh( geometry, material );
				// scene.add( mesh );

				renderer = new THREE.WebGLRenderer();
				renderer.setPixelRatio( window.devicePixelRatio );
				renderer.setSize( window.innerWidth, window.innerHeight );
				document.body.appendChild( renderer.domElement );

				// //

				window.addEventListener( 'resize', onWindowResize, false );
				gui.add( emotionSpringSad.targetRange , 'max', 0, 1 ).step(.01).name('sad')
				gui.add( emotionSpringQuizzical.targetRange , 'max', 0, 1 ).step(.01).name('quizzical')
				gui.add( emotionSpringPouty.targetRange , 'max', 0, 1 ).step(.01).name('pouty')
				gui.add( emotionSpringMischief.targetRange , 'max', 0, 1 ).step(.01).name('mischief')
				gui.add( emotionSpringHuh.targetRange , 'max', 0, 1 ).step(.01).name('confuse')
				gui.add( emotionSpringGasp.targetRange , 'max', 0, 1 ).step(.01).name('surprise')
				gui.add( emotionSpringDisgusted.targetRange , 'max', 0, 1 ).step(.01).name('disgust')
				gui.add( emotionSpringAwkward.targetRange , 'max', 0, 1 ).step(.01).name('awkward')


			}

			function onWindowResize() {

				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();

				renderer.setSize( window.innerWidth, window.innerHeight );

			}

			function animate() {

				requestAnimationFrame( animate );

				// mesh.rotation.x += 0.005;
				// mesh.rotation.y += 0.01;

				renderer.render( scene, camera );

			}

		</script>

	</body>
</html>
